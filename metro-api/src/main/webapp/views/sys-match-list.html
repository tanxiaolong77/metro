<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="format-detection" content="telephone=no">
		<title>北京地铁</title>
		<link href="${ctxPath}/views/css/iconfont.min.css" rel="stylesheet" type="text/css" />
		<link href="${ctxPath}/views/css/amazeui.css" rel="stylesheet" type="text/css">
		<link href="${ctxPath}/views/css/amazeui.datetimepicker.css" rel="stylesheet" type="text/css/">
		<link href="${ctxPath}/views/css/all.css" rel="stylesheet" type="text/css" />
		<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdn.bootcss.com/jquery.form/4.2.2/jquery.form.min.js"></script>
		<script src="${ctxPath}/views/js/amazeui.min.js"></script>
		<script src="${ctxPath}/views/js/amazeui.datetimepicker.min.js"></script>
		<script src="${ctxPath}/views/js/all.js"></script>
	</head>
	<style>
		.table {
			padding-top: 0.1px;
		}
		
		.nav {
			height: 50px;
			line-height: 50px;
			margin-bottom:20px;
		}
		.nav-content{
			border-bottom:1px solid #eee;
			
		}
		.nav-content {
			margin-left: 100px;
			margin-right:50px;
			
		}
		
		.table-search {
			margin-left: 200px;
		}
		
		.dataTables-wrap {
			margin: 50px;
		}
	</style>

	<body>
		<div class="table pageWrap">
			<header class="clearfix"></header>
			<div class="nav">
				<div class="nav-content">
					<span>导航页:</span>
					<span><a href="${ctxPath}/index.m">首页</a>-开赛设置-查询</span>
				</div>
			</div>
			<div class="table-content">
				<div class="table-search">
					<ul class="clearfix">
						<li class="fl creditwe-search-li">
							<div class="fl mr10">查询条件1:</div>
							<div class="fl ">
								<input type="type" width="100" class="userid search-input" />
							</div>
						</li>
						<li class="fl creditwe-search-li">
							<div class="fl mr10">查询条件2:</div>
							<div class="fl ">
								<select data-am-selected="{btnWidth: '140px', btnSize: 'sm', btnStyle: 'secondary'}">
									<option value='0'>请选择</option>
									<option value="id">商户编码</option>
									<option value="contact_phone">联系人手机号</option>
									<option value="contact">联系人姓名</option>
								</select>
							</div>
						</li>
						<li class="fl creditwe-search-li">
							<div class="fl mr10">查询条件3:</div>
							<div class="fl data-input-wrap">
								<input type="text" class="am-form-field data-input search-input" placeholder="日历组件" data-am-datepicker readonly required /> --
								<input type="text" class="am-form-field data-input search-input" placeholder="日历组件" data-am-datepicker readonly required />
							</div>
						</li>
						<li class="fl creditwe-search-li">
							<button class="mr10 am-btn am-btn-primary" type="button">查询</button>
						</li>
						<li class="fl creditwe-search-li">
							<button class="mr10 am-btn am-btn-primary" type="button">新增</button>
						</li>
					</ul>
				</div>
			</div>
			<div class="dataTables-wrap">

				<table id="dataTables" class="am-table-centered am-table am-table-bordered am-table-radius am-text-nowrap">
					<thead class="text-c">
						<tr class="am-primary">
							<th>赛事名称</th>
							<th>岗位</th>
							<th>开始时间</th>
							<th>结束时间</th>
							<th>当前阶段</th>
							<th>操作</th>
						</tr>
					</thead>
				</table>
			</div>
			
			<footer></footer>

		</div>
		
		<script src="${ctxPath}/views/js/all.js"></script>
		<script>
			function dataTables() {
				console.log("abnormalUser is start");
				//列表初始化
				var table = $("#dataTables").dataTable({
					language: lang, //提示信息
					ordering: false, //禁止排序
					bStateSave: true, //保留同页面
					autoWidth: false, //禁用自动调整列宽
					stripeClasses: ["odd", "even"], //为奇偶行加上样式，兼容不支持CSS伪类的场合
					processing: false, //隐藏加载提示,自行处理
					serverSide: true, //启用服务器端分页
					searching: false, //禁用原生搜索
					orderMulti: false, //启用多列排序
					deferRender: true, //当处理大数据时，延迟渲染数据，有效提高Datatables处理能力
					order: [], //取消默认排序查询,否则复选框一列会出现小箭头
					renderer: "bootstrap", //渲染样式：Bootstrap和jquery-ui
					pagingType: "full_numbers", //分页样式：simple,simple_numbers,full,full_numbers
					columnDefs: [{
						"targets": 'nosort', //列的样式名
						"orderable": false //包含上样式名‘nosort’的禁止排序
					}],
					ajax: function(data, callback, settings) {
						
						/* var returnData = {};
						returnData.data = [];
						returnData.recordsTotal = 50; //返回数据全部记录
						returnData.recordsFiltered = 50;
						callback(returnData); */
						//that.param.pageSize = data.length; //页面显示记录条数，在页面显示每页显示多少项的时候
						//that.param.startNumber = data.start; //开始的记录序号
						//that.paramTem.pageSize = (data.start / data.length) + 1; //当前页码
						$.ajax({
							type: "get",
							url: "${ctxPath}/match/matchSearch.m",
							async: false,
							data: "",
							success: function(data) {
								console.log(data)
								return;
								if(data.error) {
									//location.href = "/notFound/notFound";
								} else {
									if(data.result.status === '1') {
										var result = data.result.resultData;
										//封装返回数据
										var returnData = {};
										returnData.recordsTotal = result.pageTotal; //返回数据全部记录
										returnData.recordsFiltered = result.pageTotal; //后台不实现过滤功能，每次查询均视作全部结果
										returnData.data = result.userInfoList; //返回的数据列表
										//调用DataTables提供的callback方法，代表数据已封装完成并传回DataTables进行渲染
										//此时的数据需确保正确无误，异常判断应在执行此回调前自行处理完毕
										callback(returnData);
										//列表初始化
										//customerList.editReset();
									} else {

									}
								}
							},
							error: function() {
								console.log('ajaxError')
							}
						})
						
					},
					"aoColumns": [{
							"data": "userid", //UserID
							"className": "userid"
						}, {
							"data": "truename", //UserID
							"className": "truename"
						}, {
							"data": "account", //UserID
							"className": "account"
						}, {
							"data": "idcard", //UserID
							"className": "idcard"
						}, {
							"data": "bankPhone", //UserID
							"className": "bankPhone"
						}, {
							"data": "mycode", //UserID
							"className": "mycode"
						},
						{
							"data": "invitedcode", //UserID
							"className": "invitedcode"
						},
						{
							"data": "userid", //UserID
							"fnCreatedCell": function(nTd, sData, oData, iRow, iCol) {
								$(nTd).html('<button type="button" class="mr10 am-btn am-btn-secondary">编辑</button><button type="button" class="mr10 am-btn am-btn-secondary">删除</button>')
							}
						},
					],
					fnDrawCallback: function() {

					}
				}).api();
			}
			dataTables()
		</script>
	</body>

</html>